<h2>üé® Create new exposition</h2>

<% if @errors && !@errors.empty? %>
  <div class="error">
    <strong>Errors:</strong>
    <ul>
      <% @errors.each do |error| %>
        <li><%= error %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<form method="post" action="/exposition" enctype="multipart/form-data">
  <div class="form-group">
    <label for="name_exposition">Name of exposition:*</label>
    <input type="text" id="name_exposition" name="name_exposition" required 
           value="<%= @params && @params['name_exposition'] %>">
  </div>

  <div class="form-group">
    <label for="descreption">Description:*</label>
    <textarea id="descreption" name="descreption" rows="4" required><%= @params && @params['descreption'] %></textarea>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label for="id_hall">Hall:*</label>
      <select id="id_hall" name="id_hall" required>
        <option value="">Choose the Hall</option>
        <% @hall.each do |hall| %>
          <option value="<%= hall[0] %>" <%= 'selected' if @params && @params['id_hall'] == hall[0].to_s %>>
            <%= hall[1] %> (Floor <%= hall[2] %>)
          </option>
        <% end %>
      </select>
    </div>

    <div class="form-group">
      <label for="start_date">Start date:*</label>
      <input type="date" id="start_date" name="start_date" required 
             value="<%= @params && @params['start_date'] %>">
    </div>

    <div class="form-group">
      <label for="end_date">End date:*</label>
      <input type="date" id="end_date" name="end_date" required 
             value="<%= @params && @params['end_date'] %>">
    </div>
  </div>

  <div class="form-group">
    <label>Exhibits in exposition:</label>
    <div class="exhibit-grid">
      <% @exhibit.each do |exhibit| %>
        <label class="checkbox-label">
          <input type="checkbox" name="exhibit[]" value="<%= exhibit[0] %>"
                 <%= 'checked' if @params && @params['exhibit'] && @params['exhibit'].include?(exhibit[0].to_s) %>>
          <%= exhibit[1] %>
        </label>
      <% end %>
    </div>
  </div>

  <div class="form-group">
    <label for="photo">Photo of exposition:</label>
    <input type="file" id="photo" name="photo[]" multiple accept="image/*">
  </div>

  <button type="submit" class="btn">‚úÖ Create exposition</button>
  <a href="/" class="btn btn-secondary">‚Üê Back</a>
</form>

<style>
.form-row {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 15px;
  margin-bottom: 20px;
}

.exhibit-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 10px;
  max-height: 200px;
  overflow-y: auto;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 5px;
}

.checkbox-label {
  display: flex;
  align-items: center;
  padding: 5px;
  background: #f8f9fa;
  border-radius: 3px;
  cursor: pointer;
}

.checkbox-label:hover {
  background: #e9ecef;
}

.checkbox-label input {
  margin-right: 8px;
}

textarea {
  width: 100%;
  padding: 12px;
  border: 1px solid #ddd;
  border-radius: 5px;
  font-family: inherit;
  resize: vertical;
}
</style>