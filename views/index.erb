<h2>üîç –ü–æ–∏—Å–∫ –ø–æ –º—É–∑–µ–π–Ω–æ–º—É –∫–æ–º–ø–ª–µ–∫—Å—É</h2>

<form method="get" action="/" class="search-form">
  <div style="display: flex; gap: 10px; margin-bottom: 20px;">
    <input type="text" name="query" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–∏, –∞–≤—Ç–æ—Ä–∞ –∏–ª–∏ —ç–∫—Å–ø–æ–Ω–∞—Ç–∞..." 
           value="<%= @search_query %>" style="flex: 1; padding: 12px;">
    
    <select name="category" style="padding: 12px;">
      <option value="all" <%= 'selected' if @search_category == 'all' %>>–í–µ–∑–¥–µ</option>
      <option value="exposition" <%= 'selected' if @search_category == 'exposition' %>>–≠–∫—Å–ø–æ–∑–∏—Ü–∏–∏</option>
      <option value="exhibit" <%= 'selected' if @search_category == 'exhibit' %>>–≠–∫—Å–ø–æ–Ω–∞—Ç—ã</option>
      <option value="author" <%= 'selected' if @search_category == 'author' %>>–ê–≤—Ç–æ—Ä—ã</option>
      <option value="hall" <%= 'selected' if @search_category == 'hall' %>>–ó–∞–ª—ã</option>
    </select>
    
    <button type="submit" style="padding: 12px 20px;">üîç –ò—Å–∫–∞—Ç—å</button>
  </div>
</form>

<% if @search_query && !@search_query.empty? %>
  <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞: <%= @results.size %> –Ω–∞–π–¥–µ–Ω–æ</h3>
  
  <% if @results.empty? %>
    <p>–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å.</p>
  <% else %>
    <div class="search-results">
      <% @results.each do |result| %>
        <div class="result-card">
          <h4>
            <% if result[2] == 'exposition' %>
              üé® <%= result[1] %>
            <% elsif result[2] == 'exhibit' %>
              üè∫ <%= result[1] %>
            <% elsif result[2] == 'author' %>
              üë®‚Äçüé® <%= result[1] %>
            <% elsif result[2] == 'hall' %>
              üèõÔ∏è <%= result[1] %>
            <% end %>
          </h4>
          
          <p>
            <% if result[3] && !result[3].empty? %>
              <% if result[2] == 'exposition' %>
                <strong>–ê–≤—Ç–æ—Ä:</strong> <%= result[3] %><br>
              <% elsif result[2] == 'exhibit' %>
                <%= result[3][0..100] %>...<br>
              <% end %>
            <% end %>
            
            <% if result[4] && !result[4].empty? %>
              <strong>–ó–∞–ª:</strong> <%= result[4] %>
            <% end %>
            
            <% if result[5] && !result[5].empty? %>
              <strong>–≠—Ç–∞–∂:</strong> <%= result[5] %>
            <% end %>
          </p>
          
          <% if result[2] == 'exposition' %>
            <a href="/exposition/<%= result[0] %>">üìñ –ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
          <% elsif result[2] == 'exhibit' %>
            <a href="/exhibit/<%= result[0] %>">üìñ –ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>
<% end %>

<style>
.search-form {
  margin: 20px 0;
}

.search-results {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 20px;
  margin-top: 20px;
}

.result-card {
  background: white;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  border-left: 4px solid #3498db;
}

.result-card h4 {
  margin: 0 0 10px 0;
  color: #2c3e50;
}

.result-card p {
  margin: 0 0 15px 0;
  color: #666;
  line-height: 1.5;
}

.result-card a {
  color: #3498db;
  text-decoration: none;
  font-weight: bold;
}

.result-card a:hover {
  text-decoration: underline;
}
</style>
