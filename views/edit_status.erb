<h2>Change status of exposition</h2>

<% if @error %>
  <div class="alert alert-error">
    <%= @error %>
  </div>
<% end %>

<div class="exposition-info">
  <h3><%= @exposition[1] %></h3>
  <p>ID: <%= @exposition[0] %></p>
  <% if @current_status %>
    <p>Present status: <span class="status-badge"><%= @current_status[3] %></span></p>
  <% end %>
</div>

<form method="post" action="/exposition/<%= @exposition[0] %>/status" class="status-form">
  <div class="form-group">
    <label for="id_status">Status:*</label>
    <select id="id_status" name="id_status" required>
      <option value="">Choose status</option>
      <% @all_status.each do |status| %>
        <option value="<%= status[0] %>" 
                <%= 'selected' if @current_status && @current_status[0] == status[0] %>>
          <%= status[1] %>
        </option>
      <% end %>
    </select>
  </div>

  <div class="form-group">
    <label for="start_date">Start date:*</label>
    <input type="date" id="start_date" name="start_date" 
           value="<%= @current_status ? @current_status[1] : Date.today.to_s %>" required>
  </div>

  <div class="form-group">
    <label for="end_date">End date:</label>
    <input type="date" id="end_date" name="end_date" 
           value="<%= @current_status ? @current_status[2] : '' %>">
    <small>Leave it empty, if it is not necessary</small>
  </div>

  <div class="form-actions">
    <button type="submit" class="btn btn-primary">üíæ Save status</button>
    <a href="/exposition/<%= @exposition[0] %>" class="btn btn-secondary">‚ùå Cancel</a>
  </div>
</form>

<style>
.exposition-info {
  background: #f8f9fa;
  padding: 15px;
  border-radius: 8px;
  margin-bottom: 20px;
  border-left: 4px solid #3498db;
}

.status-form {
  max-width: 500px;
}

.status-badge {
  background: #3498db;
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 14px;
  font-weight: bold;
}

.form-actions {
  display: flex;
  gap: 15px;
  margin-top: 20px;
}
</style>